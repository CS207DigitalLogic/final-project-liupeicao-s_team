# 数码管显示逻辑总结

本文档基于 `cya/src/top/Seg_Driver.v` 及约束文件 `cya/src/constraints/constraints.xdc` 整理，总结了数码管在不同状态下的预期显示内容。

## 1. 硬件引脚映射

### 位选 (Common Anode/Cathode Select)
数码管从左到右依次为 AN7 到 AN0。

| 数码管编号 | 对应引脚 | 描述 |
| :---: | :---: | :--- |
| **AN7** (左一) | **G6** | 最高位 (Leftmost) |
| **AN6** | **E1** | |
| **AN5** | **F1** | |
| **AN4** | **G1** | |
| **AN3** | **H1** | |
| **AN2** | **C1** | |
| **AN1** | **C2** | |
| **AN0** (右一) | **G2** | 最低位 (Rightmost) |

### 段选 (Segment Data)
控制 `seg_data_0_pin`。

| 段名 | 对应引脚 | 描述 |
| :---: | :---: | :--- |
| **A** | **B4** | |
| **B** | **A4** | |
| **C** | **A3** | |
| **D** | **B1** | |
| **E** | **A1** | |
| **F** | **B3** | |
| **G** | **B2** | |
| **DP** | **D5** | 小数点 |

---

## 2. 显示内容总表

下表列出了所有状态下 8 个数码管的预期显示字符。

- **Err State**: 对应 `current_state = 12 (CALC_ERROR)`
- **Mode**: 对应 `sw_mode` (SW[7:5]) 设置
- **空格**: 表示该位熄灭 (Blank)

| 状态 / 模式 | AN7 (左一)<br>Pin: G6 | AN6<br>Pin: E1 | AN5<br>Pin: F1 | AN4<br>Pin: G1 | AN3<br>Pin: H1 | AN2<br>Pin: C1 | AN1<br>Pin: C2 | AN0 (右一)<br>Pin: G2 | 备注 |
| :--- | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :--- |
| **Error (错误)** | **E** | **r** | **r** | (空) | (空) | (空) | **1** 或 (空) | **0** ~ **9** | 若倒计时>=10显示"10"，否则显示个位 |
| **Input (输入)**<br>`SW=000` | **I** | **n** | **P** | **U** | **t** | (空) | (空) | (空) | "InPut" |
| **Gen (随机)**<br>`SW=001` | **G** | **E** | **N** | (空) | (空) | (空) | (空) | (空) | "GEN" |
| **Display (显示)**<br>`SW=010` | **d** | **I** | **S** | **P** | (空) | (空) | (空) | (空) | "dISP" |
| **Calc (计算)**<br>`SW=011` | **C** | **A** | **L** | **C** | (空) | (空) | (空) | (空) | "CALC" |
| **Bonus (加分项)**<br>`SW=100` | **b** | **o** | **N** | **U** | **S** | (空) | (空) | (空) | "boNUS" |
| **Default (默认)**<br>其他模式 | **-** | **-** | **-** | **-** | (空) | (空) | (空) | (空) | "----" |

### 字符说明
- **E, r**: 用于 "Err"
- **I, n, P, U, t**: 用于 "InPut"
- **G, E, N**: 用于 "GEN"
- **d, I, S, P**: 用于 "dISP"
- **C, A, L**: 用于 "CALC"
- **b, o, N, U, S**: 用于 "boNUS"
- **-**: 减号/横线
